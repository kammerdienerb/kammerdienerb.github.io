<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>bJou</title>
        <link rel="stylesheet" href="styles/basic.css">
        <link rel="stylesheet" href="styles/source_code.css">
    </head>

<div class="topnav">
    <a href="index.html" class="logo_a" id="logo_link"><img class="logo" src="images/logo_white.png"/><span class="logo_text">bJou</span></a>
    <span id="navlinks">
    <a href="install.html" class="nav_a active">Install</a>
    <a href="features.html" class="nav_a">Features</a>
    <a href="learn.html" class="nav_a">Learn</a>
    <a href="blog.html" class="nav_a">Blog</a>
    </span>
</div>

<body>
<header>
    <h1>Installing bJou</h1>
</header>
<p>
Currently, the bJou compiler must be built from source. To compile bJou, ensure the following dependencies are met:
<ul>
    <li>A C++ compiler new enough to support the C++11 standard</li>
    <li>An installation of LLVM at least as new as version 4.0.0</li>
    <ul>
        <li>LLVM can typically be found through a package manager such as apt, pacman, or homebrew.</li>
        <li>Alternatively LLVM source code can be downloaded <a href="http://releases.llvm.org" target="_blank">here</a> and you can build it yourself.</li>
        <li><strong>Optional:</strong> It is recommended that you build LLVM with the <code>lld</code> linker tool enabled. If the version of LLVM used to build bJou comes with <code>lld</code>, it will be embedded into bJou and bJou will try to use it instead of the system linker.</li>
    </ul>
    <li><strong>Optional: </strong>If you have Google's TCMalloc installed, bJou will be built to use it for significant performance improvements.
        <ul>
            <li>Read about it <a href="http://goog-perftools.sourceforge.net/doc/tcmalloc.html" target="_blank">here</a>.</li>
            <li>Get it as a part of <a href="https://github.com/gperftools/gperftools" target="_blank">gperftools</a>.</li>
        </ul>
    </li>
</ul>
If you have those dependencies met, you can grab a copy of bJou from <a href="https://www.github.com/kammerdienerb/bJou" target="_blank">GitHub</a>:
</p>
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>git clone https://www.github.com/kammerdienerb/bJou</span>
</pre>
<h2>Using the Build Script</h2>
<p>
To build the project using the included build script, simply run:
</p>
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>./build.sh</span>
</pre>
<p>
The <code>build.sh</code> script takes these additional arguments:
    <ul>
        <li><strong>--build-type</strong> or just <strong>-b</strong>: accepts either "Debug" or "Release". Defaults to "Release".</li>
        <li><strong>--install-prefix</strong> or just <strong>-i</strong>: accepts a path in which to install bJou after it is built. Defaults to a system path like <code>/usr</code> or <code>/usr/local</code>.</li>
        <li><strong>--llvm-config</strong> or just <strong>-l</strong>: accepts a path to an <code>llvm-config</code> executable for the installation of LLVM you wish to use. If this flag is not provided, this will try to be determined automatically.</li>
    </ul>
As an example, if you wanted to build a debug version of bJou in its own directory in your home directory with a version of LLVM also located in your home directory, you could do:
</p>
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>./build.sh -b Debug --install-prefix ~/bjou --llvm-config ~/llvm/bin/llvm-config</span>
</pre>
<p>
Once bJou has successfully compiled, it can be installed to the previously specified install path:
</p>
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>./install.sh</span>
</pre>
<h2>Using CMake Directly</h2>
<p>
bJou is a CMake-based project, so if you wish to have more control over the build, you can use the standard CMake build procedure to compile.
The following variables can be changed:
    <ul>
        <li><strong>LLVM_CONFIG</strong>: the path the the <code>llvm-config</code> executable.</li>
        <li><strong>BJOU_USE_COLOR</strong>: Turn on/off colored output from the bJou compiler.</li>
    </ul>
To build, first navigate to the bJou project directory.
Download an additional component, <code>nolibc_syscall</code>, and build it:
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>git clone https://www.github.com/kammerdienerb/nolibc_syscall</span>
</pre>
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>cd nolibc_syscall && make</span>
</pre>
Then, create a build directory:
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>mkdir /path/to/build/dir &amp;&amp; cd /path/to/build/dir</span>
</pre>
Run CMake:
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>cmake /path/to/bjou</span>
</pre>
Build and install:
<pre class="inline_code">
<span class="sl"><span class="prompt">$ </span>make &amp;&amp; make install</span>
</pre>
<strong>Note</strong>: if you didn't build bJou with <code>build.sh</code>, <strong>DO NOT</strong> use <code>install.sh</code>.
</p>
</body>
<footer>
    <ul>
        <li><a href="https://www.github.com/kammerdienerb/bJou" target="_blank"><img src="images/GitHub-Mark-120px-plus.png"/></a></li>
        <li><a href="https://discord.gg/ZuDqxb8" target="_blank"><img src="images/Discord-Logo-Color.png"/></a></li>
    </ul>
    <span class="foot_txt">This website is open source and available on <a href="https://www.github.com/kammerdienerb/kammerdienerb.github.io" target="_blank">GitHub</a>.</span>
</footer>
</html>
